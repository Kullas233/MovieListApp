name: Lock Branch After MR
on:
  pull_request:
    types:
      - closed
    branches: main

jobs:
  if_merged:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    permissions:
      contents: write # Required to create the lock branch
      pull-requests: write # Recommended for full functionality
    steps:
      - name: Lock branch
        id: lock
        uses: JustinDFuller/github-action-lock-branch@v0.1
        with:
          lock: true ## required
          token: ${{ secrets.LOCK_TOKEN }} # required
          branch: github.event.pull_request.head.ref
